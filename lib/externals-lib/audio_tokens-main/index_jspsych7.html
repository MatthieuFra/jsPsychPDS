<!DOCTYPE html>
<html>
    <head>
        <title>My experiment</title>
        <script src="https://unpkg.com/jspsych@7.0.0"></script>
        <script src="js/jspsych-audio-tokens-v7.js"></script>
        <script src="js/audio-tokens.js"></script>
        <script src="//d3js.org/d3.v4.min.js"></script>
        <link href="https://unpkg.com/jspsych@7.0.0/css/jspsych.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
    </body>
    <script>

        // Array with stimulus file paths
        var stimuli = [
            'data/cven_00_02286_84473_617520.wav',
            'data/cven_03_26059_84473_17388318.wav',
            'data/cven_05_14026_84473_17255724.wav',
            'data/cven_06_31405_84473_97708.wav',
            'data/cven_07_27838_84473_566483.wav',
            'data/cven_08_19497_84473_17246733.wav',
            'data/cven_09_26764_84473_17637624.wav',
            'data/cven_10_19680_84473_665433.wav',
            'data/cven_17_17551_84473_512103.wav'
        ]

        var single_feature_trial = {
            type: jsPsychAudioTokens,
            ratingtype: 'features',
            stimuli: stimuli.slice(0,4), // select only first four stimuli
            label: ['Feature 1'],
            anchors: [['low', '', 'high']],
            force_listen: false,
            loop: true,
		    prompt: '<p>Please rate these files</p>'
        }

        var multiple_feature_trial = {
            type: jsPsychAudioTokens,
            ratingtype: 'features',
            stimuli: stimuli.slice(0,4),
            label: ['Feature 1', 'Feature 2', 'Feature 3'],
            anchors: [['low', '', 'high'],
                      ['low', '', 'high'],
                      ['low', '', 'high']],
            force_listen: false,
            loop: true,
            draw_edges: true
        }

        var features2d_trial = {
            type: jsPsychAudioTokens,
            ratingtype: 'features2d',
            stimuli: stimuli, // select all stimuli
            label: ['Feature 1', 'Feature 2'],
            anchors: [['low', '', 'high'],
                      ['low', '', 'high']],
            force_listen: false,
            loop: true,
            draw_edges: true
        }

        var categories_trial = {
            type: jsPsychAudioTokens,
            ratingtype: 'categories',
            stimuli: stimuli,
            label: ['Category 1', 'Category 2'],
            force_listen: false,
            loop: true
        }

        var cluster_trial = {
            type: jsPsychAudioTokens,
            ratingtype: 'cluster',
            stimuli: stimuli,
            force_listen: false,
            loop: true
        }

        var similarity_trial = {
            type: jsPsychAudioTokens,
            ratingtype: 'similarity',
            stimuli: stimuli,
            force_listen: false,
            loop: true,
            draw_edges: true
        }

        var triplets_trial = {
            type: jsPsychAudioTokens,
            ratingtype: 'triplets',
            stimuli: stimuli,
            force_listen: false,
            loop: true
        }

        // Add all trials to a timeline array
        var timeline = [
            single_feature_trial,
            multiple_feature_trial,
            features2d_trial,
            categories_trial,
            cluster_trial,
            similarity_trial,
            triplets_trial
        ]

        var jsPsych = initJsPsych({
            show_progress_bar: true,
            on_finish: function(){
                jsPsych.data.displayData();
            }
        });

        jsPsych.run(timeline);

    </script>
</html>
