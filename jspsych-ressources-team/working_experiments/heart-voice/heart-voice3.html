<!DOCTYPE html>
<html>
<head>
  <title>PDS jsPsych Demo</title>

  <!-- Load libraries -->
  <script src="../../../lib/jspsych-7.3.0/dist/jspsych.js"></script>

  <!-- Load jsPsych plug-ins -->
  <script src="../../../lib/jspsych-7.3.0/dist/plugin-html-button-response.js" type="text/javascript"></script>
  <script src="../../../lib/jspsych-7.3.0/dist/plugin-html-keyboard-response.js" type="text/javascript"></script>
  <script src="../../../lib/jspsych-7.3.0/dist/plugin-video-button-response.js" type="text/javascript"></script>
  <script src="../../../lib/jspsych-7.3.0/dist/plugin-audio-button-response.js" type="text/javascript"></script>
  <script src="../../../lib/jspsych-7.3.0/dist/plugin-instructions.js" type="text/javascript"></script>
  <script src="../../../lib/jspsych-7.3.0/dist/plugin-preload.js" type="text/javascript"></script>
  <script src="../../../lib/jspsych-7.3.0/dist/plugin-fullscreen.js" type="text/javascript"></script>
  <script src="../../../lib/jspsych-7.3.0/dist/plugin-survey-html-form.js" type="text/javascript"></script>
  <script src="../../../lib/jspsych-7.3.0/dist/plugin-survey-multi-choice.js" type="text/javascript"></script>
  <script src="../../../lib/jspsych-7.3.0/dist/plugin-survey-text.js" type="text/javascript"></script>
  <script src="../../../lib/jspsych-7.3.0/dist/plugin-call-function.js" type="text/javascript"></script>

  <!-- Load CSS styles -->
  <link href="../../../lib/jspsych-7.3.0/dist/jspsych.css" rel="stylesheet" type="text/css"></link>
  
</head>
<body></body>
<script>
/*

Code of the experiment of Nadia Guerrouaou.
Inspired by Galvez-Pol et al's (2022) results describing our ability to depict HR on faces, we are investigating if this ability can be observed in voice and how the pitch could be a most relevant acoustical parameters in this matter, if true.

2023/03/18

AUTHOR: Matthieu Fraticelli / fraticelli.matthieu@hotmail.fr

*/

  /* _______________________________________________________________________________________
PARAMETRES */

  
const VIDEOS = [
  "vid/TEST2.mp4",
  "vid/TEST3.mp4",
  "vid/TEST2.mp4",
  "vid/TEST3.mp4",
  ];

const VIDEOS_TRAINING = [
  "vid/TEST2.mp4",
  "vid/TEST2.mp4",
  ];

const CONSIGNE1 = `INSERER CONSIGNES 1`;
const CONSIGNE2 = `INSERER CONSIGNES 2`;
const CONSIGNE3 = `INSERER CONSIGNES 3`;
//const CONSIGNE1 = ``;

const EMAIL = "example@ircam.fr";


//__________________________________________________________________________________________


// Initialize jsPsych
  
var jsPsych = initJsPsych({
      //show_progress_bar: true,
      on_finish: function() {
      //jsPsych.data.displayData(); 
        jsPsych.data.get().localSave('csv','mydata.csv');
       },
      on_trial_start: function() {
       },
      on_trial_finish: function(){
       },
    }); 
  
  
// Initialize timeline.
var timeline = [];

  
//CODE BELOW -------------------------------------------------------------------------------------------------------------



//creating of the pairs  
var arrayElements = VIDEOS;


const pairsOfArray = array => (
  array.reduce((acc, val, i1) => [
    ...acc,
    ...new Array(array.length - 1 - i1).fill(0)
      .map((v, i2) => ([array[i1], array[i1 + 1 + i2]]))
  ], [])
) 

//The new array with all the pairs.
var pairsArray = pairsOfArray(jsPsych.randomization.shuffle(arrayElements));
pairsArray = jsPsych.randomization.shuffle(pairsArray)
console.log(pairsArray)

 
//preload sound and video     
var preload = {
   type: jsPsychPreload,
   video: VIDEOS,
  };
    
timeline.push(preload);
 
  
var numbVidsEval = arrayElements.length
console.log(`Number of videos is: ${numbVidsEval}`)

var numbVideosEvalPairs = pairsArray.length
console.log(`Number of videos pairs is: ${numbVideosEvalPairs}`)



// a few variables used in the code in order to check answers of the participants.
 var rep;
 var whitchVideo = ['','']; 
 var viewedVideo = [false,false]; 
 var isTraining = true;
 var resultRemarque;

// a few variables for the DATA part.
 var choosedVideo;
 var age;
 var sex; 
 var soundSystem1;



 /*var preloadBeforeTask = {
    type: jsPsychPreload,
    video: function(){
      return [pairsArray[i][0], pairsArray[i][1]]
    },
  };*/


 // Display without the "response" part showed
 function html1(){ 
  return `
          <p style="font-size: 25px">

           <b>Evaluation</b></p>

           <hr>

           <p>Vous allez visionner deux vidéos différentes avec une paire voix et rythme cardiaque.</p>

           <p>Indiquez quelle paire vous parait être la plus associée.</p>

           <hr>

           

            <div style="display: flex; justify-content: space-between;"">

                <video width="320" height="240" ${whitchVideo[0]}>
                   <source src="${pairsArray[i][0]}" type="video/mp4">
                </video>

                <video width="320" height="240" ${whitchVideo[1]}>
                   <source src="${pairsArray[i][1]}" type="video/mp4">
                </video>

          </div>

          <hr>

           <p style="font-size: 15px">
            <i>
              Utilisez les flèches du clavier pour visionner les vidéos. 
            </i>
          </p>

          <span style="font-size:15px;border: 1px solid #ccc; line-height: 1.4;color: #333;padding: 7.5px 20px; font-family: sans-serif; background-color: white; margin: 5px; border-radius: 5px;"><b style="font-size: 18px">←</b></span>
          
          <span style="font-size:15px;border: 1px solid #ccc; line-height: 1.4;color: #333;padding: 7.5px 20px; font-family: sans-serif; background-color: white; margin: 5px; border-radius: 5px;"><b style="font-size: 18px">→</b></span>
    
      <p></p>

          <hr>

          <p style="font-size: 20px; color: white">
            <b>Réponse</b>
          </p>
          <p style="font-size: 15px; color: white">
              Appuyez sur les touches suivantes pour répondre :
          </p>

           <span style="font-size:15px;border: 1px solid white; line-height: 1.4;color: white;padding: 7.5px 20px; font-family: sans-serif; background-color: white; margin: 5px; border-radius: 5px; color: white"><b style="font-size: 18px">A</b></span>
          
          <span style="font-size:15px;border: 1px solid white; line-height: 1.4;color: white;padding: 7.5px 20px; font-family: sans-serif; background-color: white; margin: 5px; border-radius: 5px; color: white"><b style="font-size: 18px">B</b></span>
 `};

  // Display with the "response" part showed
  function html2(){ 
  return `

           <p style="font-size: 25px">

           <b>Evaluation</b></p>

           <hr>

           <p>Vous allez visionner deux vidéos différentes avec une paire voix et rythme cardiaque.</p>

           <p>Indiquez quelle paire vous parait être la plus associée.</p>

           <hr>

           

            <div style="display: flex; justify-content: space-between;"">

                <video width="320" height="240" ${whitchVideo[0]}>
                   <source src="${pairsArray[i][0]}" type="video/mp4">
                </video>

                <video width="320" height="240" ${whitchVideo[1]}>
                   <source src="${pairsArray[i][1]}" type="video/mp4">
                </video>

          </div>

          <hr>

           <p style="font-size: 15px">
            <i>
              Utilisez les flèches du clavier pour visionner les vidéos. 
            </i>
          </p>

          <span style="font-size:15px;border: 1px solid #ccc; line-height: 1.4;color: #333;padding: 7.5px 20px; font-family: sans-serif; background-color: white; margin: 5px; border-radius: 5px;"><b style="font-size: 18px">←</b></span>
          
          <span style="font-size:15px;border: 1px solid #ccc; line-height: 1.4;color: #333;padding: 7.5px 20px; font-family: sans-serif; background-color: white; margin: 5px; border-radius: 5px;"><b style="font-size: 18px">→</b></span>
    
      <p></p>

          <hr>

          <p style="font-size: 20px">
            <b>Réponse</b>
          </p>
          <p style="font-size: 15px">
            <i>
              Appuyez sur les touches suivantes pour répondre :
            </i>
          </p>

           <span style="font-size:15px;border: 1px solid #ccc; line-height: 1.4;color: #333;padding: 7.5px 20px; font-family: sans-serif; background-color: white; margin: 5px; border-radius: 5px;"><b style="font-size: 18px">A</b></span>
          
          <span style="font-size:15px;border: 1px solid #ccc; line-height: 1.4;color: #333;padding: 7.5px 20px; font-family: sans-serif; background-color: white; margin: 5px; border-radius: 5px;"><b style="font-size: 18px">B</b></span>
  `};

  //
  function html1training(){ 
  return `
          <p style="font-size: 25px">

           <b>Entrainement</b></p>

           <hr>

           <p>Vous allez visionner deux vidéos différentes avec une paire voix et rythme cardiaque.</p>

           <p>Indiquez quelle paire vous parait être la plus associée.</p>

           <hr>

           

            <div style="display: flex; justify-content: space-between;"">

                <video width="320" height="240" ${whitchVideo[0]}>
                   <source src="${VIDEOS_TRAINING[0]}" type="video/mp4">
                </video>

                <video width="320" height="240" ${whitchVideo[1]}>
                   <source src="${VIDEOS_TRAINING[1]}" type="video/mp4">
                </video>

          </div>

          <hr>

           <p style="font-size: 15px">
            <i>
              Utilisez les flèches du clavier pour visionner les vidéos. 
            </i>
          </p>

          <span style="font-size:15px;border: 1px solid #ccc; line-height: 1.4;color: #333;padding: 7.5px 20px; font-family: sans-serif; background-color: white; margin: 5px; border-radius: 5px;"><b style="font-size: 18px">←</b></span>
          
          <span style="font-size:15px;border: 1px solid #ccc; line-height: 1.4;color: #333;padding: 7.5px 20px; font-family: sans-serif; background-color: white; margin: 5px; border-radius: 5px;"><b style="font-size: 18px">→</b></span>
    
      <p></p>

          <hr>

          <p style="font-size: 20px; color: white">
            <b>Réponse</b>
          </p>
          <p style="font-size: 15px; color: white">
              Appuyez sur les touches suivantes pour répondre :
          </p>

           <span style="font-size:15px;border: 1px solid white; line-height: 1.4;color: white;padding: 7.5px 20px; font-family: sans-serif; background-color: white; margin: 5px; border-radius: 5px; color: white"><b style="font-size: 18px">A</b></span>
          
          <span style="font-size:15px;border: 1px solid white; line-height: 1.4;color: white;padding: 7.5px 20px; font-family: sans-serif; background-color: white; margin: 5px; border-radius: 5px; color: white"><b style="font-size: 18px">B</b></span>
 `};

  // Display with the "response" part showed
  function html2training(){ 
  return `

           <p style="font-size: 25px">

           <b>Entrainement</b></p>

           <hr>

           <p>Vous allez visionner deux vidéos différentes avec une paire voix et rythme cardiaque.</p>

           <p>Indiquez quelle paire vous parait être la plus associée.</p>

           <hr>

           

            <div style="display: flex; justify-content: space-between;"">

                <video width="320" height="240" ${whitchVideo[0]}>
                   <source src="${VIDEOS_TRAINING[0]}" type="video/mp4">
                </video>

                <video width="320" height="240" ${whitchVideo[1]}>
                   <source src="${VIDEOS_TRAINING[1]}" type="video/mp4">
                </video>

          </div>

          <hr>

           <p style="font-size: 15px">
            <i>
              Utilisez les flèches du clavier pour visionner les vidéos. 
            </i>
          </p>

          <span style="font-size:15px;border: 1px solid #ccc; line-height: 1.4;color: #333;padding: 7.5px 20px; font-family: sans-serif; background-color: white; margin: 5px; border-radius: 5px;"><b style="font-size: 18px">←</b></span>
          
          <span style="font-size:15px;border: 1px solid #ccc; line-height: 1.4;color: #333;padding: 7.5px 20px; font-family: sans-serif; background-color: white; margin: 5px; border-radius: 5px;"><b style="font-size: 18px">→</b></span>
    
      <p></p>

          <hr>

          <p style="font-size: 20px">
            <b>Réponse</b>
          </p>
          <p style="font-size: 15px">
            <i>
              Appuyez sur les touches suivantes pour répondre :
            </i>
          </p>

           <span style="font-size:15px;border: 1px solid #ccc; line-height: 1.4;color: #333;padding: 7.5px 20px; font-family: sans-serif; background-color: white; margin: 5px; border-radius: 5px;"><b style="font-size: 18px">A</b></span>
          
          <span style="font-size:15px;border: 1px solid #ccc; line-height: 1.4;color: #333;padding: 7.5px 20px; font-family: sans-serif; background-color: white; margin: 5px; border-radius: 5px;"><b style="font-size: 18px">B</b></span>
  `};


var uniqueID; 

//The first screen when launching the experiment
var welcome = {
      
      type: jsPsychHtmlButtonResponse,
      stimulus: `
       <p><img src="https://www.femto-st.fr/sites/all/themes/femto/images/logo.svg" width="200" height="auto"></p>
      
       <p style="font-size:25px;border: 0px solid #000;border-radius: 5px; color:#222;padding: 8px; font-family: sans-serif">Bienvenue</p><hr>
       <p>Merci d'avoir accepté de participer.</p>
       <p style="font-size:18px">Pour commencer, veuillez cliquer sur <i>Continuer</i>.</p>
  `,
      choices: ['Continuer'],
      on_start: function(){
        var IDLetter = ['A','B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'Y', 'Y', 'Z']
        var IDLetterChoose = jsPsych.randomization.shuffle(IDLetter).slice(0, 3).join('')
        var randomNumberID = `${Math.floor((Math.random()*1000))}`
        uniqueID = `${Math.floor((Math.random()*100))}`+`-${IDLetterChoose}`+`-${Math.floor(Date.now()-1000000000000)}`; 
        console.log(uniqueID)
        jsPsych.data.addProperties({subject: uniqueID});
        console.log(Date(Date.now()).toLocaleString().split(',')[0])
        return uniqueID
      },
      on_finish: function(){
      },
    };
    
timeline.push(welcome);

//To switch in fullscreen
var enter_fullscreen = {
      type: jsPsychFullscreen,
      message: "<p><i>Vous allez entrer en plein écran.</i></p>",
      button_label: "Continuer",
      fullscreen_mode: true
      }; 

timeline.push(enter_fullscreen) 


var surveyNew = {
  type: jsPsychSurveyHtmlForm,
  preamble: `
      <p style="font-size: 20px"><b>Questionnaire d'information</b></p><hr>
      <p><i>Avant toute chose, nous avons besoins de quelques informations.</i></p>
  `,
  html: `
  <p>Quel <b>âge</b> avez vous ?</p>
  <p><input name="first" type="number" size="30" required="true"/></p>
  <p><label for="sexe">Quel est votre <b>sexe</b></label></p>
<p><select id="sexe" name="sexe" size="1" required="true">
  <option value="M">M</option>
  <option value="F">F</option>
</select></p>
  
  `,
  
  /*
  <p>Quel est votre <b>sexe</b></p>
  <p><input name="second" type="text" placeholder="M/F" /></p>
  */
  on_finish: function(){
    console.log(`Age is ${jsPsych.data.getLastTrialData().trials[0].response.first}`)
    console.log(`Sex is ${jsPsych.data.getLastTrialData().trials[0].response.sexe}`)
    age = jsPsych.data.getLastTrialData().trials[0].response.first
    sex = jsPsych.data.getLastTrialData().trials[0].response.sexe
  },
};

timeline.push(surveyNew); 


var trialSystem = {
  type: jsPsychSurveyMultiChoice,
  questions: [
    {
      prompt: "Avec quel appareil écoutez-vous ?", 
      name: 'soundSystem', 
      options: ['Écouteurs', 'Casque', "Haut-parleur de l'ordinateur", 'Enceintes'], 
      required: true
    }, 
  ],
  on_finish: function(){
    soundSystem1 = jsPsych.data.getLastTrialData().trials[0].response.soundSystem
    console.log(`The sound system is ${soundSystem1}`)
    return soundSystem1
  },
};  
  
timeline.push(trialSystem);


var loudnessTest1 = {
      type: jsPsychHtmlButtonResponse,
      stimulus: `<p style="font-size:25px; color:black;">Pré-test d'écoute</p><hr>
                 <p><i>Dans un premier temps, vérifions que vous pouvez entendre correctement sur votre appareil d'écoute.</i></p>
                 <p>Veuillez cliquer sur <strong>continuer</strong></p><p></p>`,
      choices: ['Continuer'],
    };
    
timeline.push(loudnessTest1);
    

var loudnessTest2 = {
    type: jsPsychAudioButtonResponse,
    stimulus: 'audio/pinknoise.wav',
    choices: ['Continuer'],
    response_allowed_while_playing: true,
    prompt: ` <p>Réglez le volume de votre casque de façon confortable.<p>
<p>Vous devez entendre clairement le son, et il ne doit être ni trop <strong>fort</strong> ni trop <strong>faible</strong>.</p>
`
};

timeline.push(loudnessTest2);


var startTest = {
      type: jsPsychHtmlButtonResponse,
      stimulus: `<p style="font-size: 25px"><b>Début du test</b></p><hr>`,
      choices: ['Continuer'],
    };
    
timeline.push(startTest);

   
var instructions = {
    type: jsPsychInstructions,
    pages: [
    `<p><b>Instructions</b></p><hr><p>${CONSIGNE1}</p>`,
    `<p><b>Instructions</b></p><hr><p>${CONSIGNE2}</p>`,
    `<p><b>Instructions</b></p><hr><p>${CONSIGNE3}</p>`,
    ],
    button_label_next: "Continuer",
    button_label_previous: "Retour",
    show_clickable_nav: true
};

timeline.push(instructions); 
    



 //-------------------------------------------------------------------------------------------------------------


 // The part that is going to display the videos, I'm using an HTML keybord response to display both videos using <video> tag.
var videoTask = {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: function(){
           console.log(`Training is ${isTraining}`)
           if(isTraining === true){
              if(viewedVideo[0] === true && viewedVideo[1] === true){
                return html2training()
              } else {
                return html1training()
              }
           } else if(isTraining === false){
              if(viewedVideo[0] === true && viewedVideo[1] === true){
                return html2()
              } else {
                return html1()
              }
           }      
        },
        /*button_html:[
          '<button class="jspsych-btn" style = "position:absolute; left:450px; top: 680px">%choice%</button>', '<button class="jspsych-btn" style = "position:absolute; right:450px; top: 680px">%choice%</button>'], */
        prompt: ``,
        on_start: function(){
           },
        on_finish: function(){
          rep = jsPsych.data.getLastTrialData().trials[0].response
          console.log(`Response is: ${rep}`)
          return rep
        },
        choices: ['A', 'B', 'a', 'b', 'ArrowLeft','ArrowRight'],
        post_trial_gap: 0,  
      };



// The loop of the video displayed, in order to watch them as many times as wanted and to respond afterwards.
var loopVideoTask = {
    timeline: [videoTask],
    loop_function: function(){
      console.log(`videos ${viewedVideo}`)
      if(rep === 'A' || rep === 'a'){
        if(viewedVideo[0] === true && viewedVideo[1] === true){
          console.log(`Response is A, viewedVideo is true no Loop!`)
            viewedVideo[0] = false
            viewedVideo[1] = false
            console.log(`Reset viewedcheck`)
            whitchVideo[0] = ''
            whitchVideo[1] = ''
            console.log(whitchVideo)
            choosedVideo = pairsArray[i][0]
            console.log(`Video choosed: ${choosedVideo}`)
          return false
        } else {
          alert("Vous devez regarder les deux vidéos avant de répondre !")
          console.log('Not both video viewed!')
          whitchVideo[0] = ''
          whitchVideo[1] = ''
          console.log(whitchVideo)
          return true
        }
      } else if(rep === 'B' || rep === 'b'){
        if(viewedVideo[0] === true && viewedVideo[1] === true){
          console.log(`Response is B, viewedVideo is true no Loop!`)
            viewedVideo[0] = false
            viewedVideo[1] = false
            console.log(`Reset viewedcheck`)
            whitchVideo[0] = ''
            whitchVideo[1] = ''
            console.log(whitchVideo)
            choosedVideo = pairsArray[i][1]
            console.log(`Video choosed: ${choosedVideo}`)
          return false
        } else {
          alert("Vous devez regarder les deux vidéos avant de répondre !")
          console.log('Not both video viewed!')
          whitchVideo[0] = ''
          whitchVideo[1] = ''
          console.log(whitchVideo)
          return true
        }
      } else if(rep === 'arrowleft'){
        whitchVideo[0] = 'autoplay'
        whitchVideo[1] = ''
        console.log(whitchVideo)
        viewedVideo[0] = true
        console.log(viewedVideo)
        console.log(`Response is Left, Loop!`)
        return true
      } else if(rep === 'arrowright'){
        whitchVideo[0] = ''
        whitchVideo[1] = 'autoplay'
        console.log(whitchVideo)
        viewedVideo[1] = true
        console.log(viewedVideo)
        console.log(`Response is Right, Loop!`)
        return true
      }
    },
  };


  // ISI cross fixation between trials.
  var interTrial = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: `<p style="font-size: 70px">+</p>`,
    choices: ["NO_KEYS"],
    trial_duration: 2000,
    data: function(){
      return {
        task: 'REPONSE SUJET',
        id: uniqueID,
        date: Date(Date.now()).toLocaleString().split(',')[0],
        age: `${age}`,
        sex: `${sex}`,
        soundSystem: `${soundSystem1}`,
        videoShowed: `${pairsArray[i]}`,
        videoChoosed: `${choosedVideo}`,
      }
    }
  };

//-------------------------------------------------------------------------------------------------------------


var training = {
      type: jsPsychHtmlButtonResponse,
      stimulus: function(){
        return `<p style="font-size: 25px">
        <b>Entrainement</b></p>
        <hr>
        <p>Commençons par un court entrainement.</p>
        `
      },
      choices: ["Commencer l'entraînement"],
    };


var endTraining = {
      type: jsPsychHtmlButtonResponse,
      stimulus: function(){
        return `<p style="font-size: 30px">
        <b>Fin de l'entraînement</b></p>
        <hr>
        <p>Le test va maintenant débuter.</p>
        `
      },
      choices: ['Commencer le test'],
      on_finish: function(){
        isTraining = false
        console.log(`END TRAINING ${isTraining}`)
        return isTraining
      }
    };

var loopTraining = {
timeline: [
  training,
  loopVideoTask,
  endTraining
  ],
loop_function: function(){
  return false
  }
};

timeline.push(loopTraining);


//to increment in the main loop
var i = 0; 
  
// The main loop for the task, with the experimental routine, depending of the number of video pairs. 
var loopTask = {
    timeline: [
      //preloadBeforeTask,
      loopVideoTask,
      interTrial,
      ],
    loop_function: function(){
      console.log(i)
      if(i < numbVideosEvalPairs-1){
        i++
        console.log(`i = ${i}`)
        return true
      } else {
        i = 0
        console.log(`Loop is over`)
        return false
      }
    },
  };

timeline.push(loopTask)


var freeText = {
  type: jsPsychSurveyText,
  questions: [
    {prompt: "Avez-vous une remarque concernant l'expérience ? Un souci rencontré ? Une suggestion ?", required: false, rows: 5}
  ],
  on_finish: function(){
    console.log(jsPsych.data.getLastTrialData().trials[0].response)
    resultRemarque = jsPsych.data.getLastTrialData().trials[0].response.Q0
    return resultRemarque
  },
  button_label: "Continuer",
}

timeline.push(freeText);


var dataFreeText = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: " ",
      on_start: function(){
      },
      on_finish: function(){
      },
      data: function(){ 
        return {
        task: 'REPONSE SUJET',
        id: uniqueID,
        date: Date(Date.now()).toLocaleString().split(',')[0],
        age: `${age}`,
        sex: `${sex}`,
        soundSystem: `${soundSystem1}`,
        resultRemarque: `${resultRemarque}`,
       }
      }, 
      choices: "NO_KEYS",
      trial_duration: 10,
    };
    
timeline.push(dataFreeText);

var finexp2 = {
  type: jsPsychHtmlButtonResponse,
  stimulus: `<p style="font-size:22px; color:black;">Contact :</p><hr>
                <p>Si besoin vous pouvez contacter l'expérimentateur à l'adresse <b>${EMAIL}</b></p>`,
  choices: ["Continuer"],
    };

timeline.push(finexp2);


var finexp = {
  type: jsPsychHtmlButtonResponse,
  stimulus: `<p style="font-size:22px; color:black;">Merci d'avoir participé !</p><hr>
                `,
  choices: ["Terminer"],
    };
    
timeline.push(finexp);

  
// END CODE ABOVE -------------------------------------------------------------------------------------------------------------

jsPsych.run(timeline);
  
</script>
</html>
